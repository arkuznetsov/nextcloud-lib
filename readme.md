[![GitHub release](https://img.shields.io/github/release/ArKuznetsov/nextcloud-lib.svg?style=flat-square)](https://github.com/ArKuznetsov/nextcloud-lib/releases)
[![GitHub license](https://img.shields.io/github/license/ArKuznetsov/nextcloud-lib.svg?style=flat-square)](https://github.com/ArKuznetsov/nextcloud-lib/blob/develop/LICENSE)
[![GitHub Releases](https://img.shields.io/github/downloads/ArKuznetsov/nextcloud-lib/latest/total?style=flat-square)](https://github.com/ArKuznetsov/nextcloud-lib/releases)
[![GitHub All Releases](https://img.shields.io/github/downloads/ArKuznetsov/nextcloud-lib/total?style=flat-square)](https://github.com/ArKuznetsov/nextcloud-lib/releases)

[![Build Status](https://img.shields.io/github/workflow/status/ArKuznetsov/nextcloud-lib/%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C%20%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B0)](https://github.com/arkuznetsov/nextcloud-lib/actions/)
[![Quality Gate](https://open.checkbsl.org/api/project_badges/measure?project=nextcloud-lib&metric=alert_status)](https://open.checkbsl.org/dashboard/index/nextcloud-lib)
[![Coverage](https://open.checkbsl.org/api/project_badges/measure?project=nextcloud-lib&metric=coverage)](https://open.checkbsl.org/dashboard/index/nextcloud-lib)
[![Tech debt](https://open.checkbsl.org/api/project_badges/measure?project=nextcloud-lib&metric=sqale_index)](https://open.checkbsl.org/dashboard/index/nextcloud-lib)

<a href="https://checkbsl.org"><img alt="Checked by Silver Bulleters SonarQube BSL plugin" src="https://web-files.do.bit-erp.ru/sonar/b_t.png" align="right" style="width:400px"/></a>

# Библиотека работы с сервисами NextCloud

Библиотека (oscript) nextcloud-lib предоставляет интерфейс для работы с сервисом [NextCloud](https://nextcloud.com/).

## Зависимости
- [logos](https://github.com/oscript-library/logos)
- [fs](https://github.com/oscript-library/fs)
- [1connector](https://github.com/vbondarevsky/1connector)

## Основной класс

```
Подключение = Новый ПодключениеNextCloud(http://localhost:8080, "admin", "P@$$w0rd");
```

## Работа с файлами

```
Подключение = Новый ПодключениеNextCloud(http://localhost:8080, "admin", "P@$$w0rd");

Файлы = Подключение.Файлы();
```

### Методы

| Методы / Параметры|||
|-|-|-|
| **Список()** |Соответствие|получает список файлов сервиса NextCloud в указанном каталоге|
|* _Каталог_|Строка|каталог для получения списка файлов|
| **Существует()** |Булево|проверяет существование файла/каталога на сервисе NextCloud|
|* _ПутьКФайлу_|Строка|путь к файлу/каталогу|
| **ЭтоФайл()** |Булево|проверяет что по указанному пути на сервисе NextCloud расположен файл|
|* _ПутьКФайлу_|Строка|путь к файлу/каталогу|
| **ЭтоКаталог()** |Булево|проверяет что по указанному пути на сервисе NextCloud расположен каталог|
|* _ПутьКФайлу_|Строка|путь к файлу/каталогу|
| **Отправить()** ||отправляет указанный файл в сервис NextCloud|
|* _ПутьКФайлу_|Строка|путь к отправляемому файлу|
|* _ПутьДляСохранения_|Строка|путь к каталогу для сохранения отправленного файла на сервисе NextCloud|
|* _ИмяДляСохранения_|Строка|имя с которым будет сохранен файл, если не указано, то будет использовано имя исходного файла|
|* _Перезаписывать_|Булево|Истина - если файл существует, то он будет перезаписан; Ложь - если файл существует, то будет выдано исключение|
| **Получить()** ||получает указанный файл из сервиса NextCloud|
|* _ПутьКФайлу_|Строка|путь к получаемому файлу на сервисе NextCloud|
|* _ПутьДляСохранения_|Строка|путь для сохранения полученного файла|
|* _Перезаписывать_|Булево|Истина - если файл существует, то он будет перезаписан; Ложь - если файл существует, то будет выдано исключение|
| **Удалить()** ||удаляет указанный файл/каталог на сервисе NextCloud|
|* _ПутьКФайлу_|Строка|путь к удаляемому файлу/каталогу|
|* _ОшибкаЕслиНеСуществует_|Булево|Истина - если файл/каталог не существует на сервере выдавать ошибку|
| **СоздатьКаталог()** ||создает каталог на сервисе NextCloud|
|* _ПутьККаталогу_|Строка|путь к создаваемому каталогу|
|* _ОшибкаЕслиСуществует_|Булево|Истина - если каталог уже существует на сервере выдавать ошибку|

## Управление пользователями

```
Подключение = Новый ПодключениеNextCloud(http://localhost:8080, "admin", "P@$$w0rd");

Пользователи = Подключение.Пользователи();
```

### Методы

| Методы / Параметры|||
|-|-|-|
| **Список()** |Массив|получает список пользователей сервиса NextCloud|
|* _СтрокаПоиска_|Строка|строка поиска идентификатора пользователя (если не указано выводятся все существующие пользователи)|
|* _Количество_|Число|количество элементов в результате (если 0 - выводятся все найденные пользователи)|
|* _Смещение_|Число|номер страницы результата (если 0 - то с начала списка найденных пользователей)|
| **ИзменяемыеПоля()** |Массив|возвращает список доступных для изменения полей|
| **ДанныеПользователя()** |Структура|возвращает описание пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
| **Добавить()** ||добавляет пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _ПользовательПароль_|Строка|пароль пользователя NextCloud|
|* _ПараметрыПользователя_|Структура|параметры пользователя NextCloud|
| **ИзменитьЗначениеПоля()** ||изменяет значение указанного поля пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _Поле_|Строка|имя поля пользователя NextCloud|
|* _Значение_|Строка|новое значение поля пользователя NextCloud|
| **ИзменитьАктивность()** ||изменяет активность пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _Активность_|Булево|Истина - включить пользователями; Ложь - отключить пользователя|
| **Удалить()** ||удаляет пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
| **ГруппыПользователя()** ||возвращает список групп пользователя NextCloud|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
| **ДобавитьПользователяВГруппу()** ||добавляет пользователя NextCloud в группу пользователей|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **УдалитьПользователяИзГруппы()** ||удаляет пользователя NextCloud из группы пользователей|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **АдминистрируемыеГруппыПользователя()** ||возвращает список групп, где пользователь является администратором|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
| **ДобавитьПользователяВАдминистраторыГруппы()** ||добавляет пользователю права администратора группы|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **УдалитьПользователяИзАдминистраторовГруппы()** ||отключает пользователю права администратора группы|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **ОтправитьПриветственноеПисьмо()** ||выполняет отправку приветственного письма пользователю|
|* _ПользовательИд_|Строка|идентификатор пользователя NextCloud|

## Управление группами пользователей


```
Подключение = Новый ПодключениеNextCloud(http://localhost:8080, "admin", "P@$$w0rd");

Группы = Подключение.ГруппыПользователей();
```

### Методы

| Методы / Параметры|||
|-|-|-|
| **Список()** |Массив|получает список групп пользователей сервиса NextCloud|
|* _СтрокаПоиска_|Строка|строка поиска идентификатора группы пользователей (если не указано выводятся все существующие группы)|
|* _Количество_|Число|количество элементов в результате (если 0 - выводятся все найденные группы)|
|* _Смещение_|Число|номер страницы результата (если 0 - то с начала списка найденных групп)|
| **Добавить()** ||добавляет группу пользователей NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **Удалить()** ||удаляет группу пользователей NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **ПользователиГруппы()** |Массив|возвращает список пользователей группы пользователей NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
| **АдминистраторыГруппы()** |Массив|возвращает список администраторов группы пользователей NextCloud|
|* _ГруппаИд_|Строка|идентификатор группы пользователей NextCloud|
